<!DOCTYPE HTML>
<html>
<head>
<title>Silicon Tracker</title>
<meta charset="utf-8">
<noscript>

    
</noscript>

<style>
  .dataTables_filter {
    display: none; 
  }
</style>    

<script src="../css/5grid/jquery.js"></script>
<script src="../css/5grid/init.js?use=mobile,desktop,1000px&amp;mobileUI=1&amp;mobileUI.theme=none&amp;mobileUI.titleBarHeight=60&amp;mobileUI.openerWidth=52"></script>

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>

        <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
<link rel="stylesheet" href="../css/custom.css">
<!--[if IE 9]><link rel="stylesheet" href="css/style-ie9.css"><![endif]-->


<script>
	$(document).ready(function() {
		var current_attr = "";
    
    // Submitting the edited attributs. When invoked, it will create an
    // object with the attribute type, and the values within the type.
    $('#submitAttributes').click(function() {
        var submitAttrs = {attr_type: current_attr, attr_vals: []}
        $('#attr_table tbody tr td input').each(function() {
            if ($(this).val() !== ""){
                submitAttrs.attr_vals.push($(this).val());              
            }
        });
        $.post('/settings/admin/attributes', submitAttrs, function(data) {
            // After success, redirect to route specified by server.
            window.location = data.redirect;
        });
    });

    // Adding a new text field to the list of attributes.
    $('#addAttribute').click(function() {
        if (current_attr) {
          $('#attr_table tbody').append(
                '<tr><td>' +
                '<input type="text">' +
                '</td><td><button class="del btn btn-link">delete</button></td></tr>');
        }
    });

    // Gets all the attribute types and places them in the dropdown menu.
		$.get('/dd/keys', function(data) {
			$.each(data, function(idx, elem) {
				$('#dd_attr').append('<option value="'+elem.attr_type+'">'+elem.attr_type+'</option>');
			});

      // Invoked when a new dropdown item is chosen. It gets all the attributes of that type
      // and puts them in a table for editing.
      $('#dd_attr').change(function(e) {
          current_attr = e.target.options[e.target.selectedIndex].text;
          // Clearing out the current table.
          $('#attr_table tbody tr').remove();

          // Getting the list of attributes and putting them in the table.
          $.get('/dd/values/'+current_attr, function(data) {
              $.each(data, function(idx, elem) {
                  $('#attr_table tbody').append(
                      '<tr><td>' +
                      '<input type="text" value="' +elem.attr_value+ '">' +
                      '</td><td><button class="del btn btn-link">delete</button></td></tr>');
              });

              // Setting up the delete button for each row.
              $('#attr_table tbody tr').on('click', '.del', function() {
                  var attrToRemove = $(this).parent().parent();
                  attrToRemove.remove();
              });
          });
      });
    });
	});
</script>
</head>
<body>
<!-- Header -->
<div id="header-wrapper">
  <header class="5grid-layout" id="site-header">
    <div class="row">
      <div class="12u">
        <div class="mobileUI-site-name" id="logo">
           <a href="/">
              <img src="../images/client-logo_intel-197x140.png" alt="Home" style="width:147.75px;height:105px;border:0;">
            </a> 
        </div>
        <nav class="mobileUI-site-nav" id="site-nav">
          <ul>
            <li><a href="/">Database</a></li>
            <li><a href="/add">Add Item</a></li>
            <li><a href="/login">Login</a></li>
            <li class="current_page_item"><a href="/settings">Settings</a></li>
          </ul>
        </nav>
      </div>
    </div>
  </header>
</div>
<!-- Main -->
<div id="main-wrapper" class="subpage">
  <div class="5grid-layout">
    <div class="row">
      <div class="3u">
        <!-- Sidebar -->
        <section>
          <ul class="link-list">
            <li><a href="#">Edit Profile</a></li>
            <li><a href="#">Email Settings</a></li>
            <li><a href="#">Edit Dropdowns</a></li>
            <li><a href="#">Setup Facial Recognition</a></li>
          </ul>
        </section>
      </div>
      <div class="9u mobileUI-main-content">
        <!-- Content -->
        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4-c control-label" for="choose_attr">Attribute</label>  
          <div class="col-md-4">
            <select id="dd_attr">
              <option></option> <!-- Attributes get loaded using ajax and jQuery -->
            </select>
          </div>
        </div>
      </div>
      <div class="9u mobileUI-main-content">
        <div class="col-md-6">
          <table id="attr_table">
            <thead>
              <tr>
                <th></th>
                <th></th>
              </tr>
            </thead>
            <tbody></tbody>
            <tfoot></tfoot>
          </table>
          <button class="btn btn-primary" id="submitAttributes">Submit</button>
          <button class="btn btn-default" id="addAttribute">Add New</button>
        </div>

      </div>  



    </div>
  </div>
</div>
<!-- Footer -->
<div id="footer-wrapper">
  <footer class="5grid-layout" id="site-footer">

    <div class="row">
      <div class="12u">
        <div class="divider"></div>
      </div>
    </div>
    <div class="row">
      <div class="12u">
        <div id="copyright"> &copy; Untitled. All rights reserved. | Design: <a target="_blank" href="http://html5up.net">HTML5 Up!</a> | Images: <a target="_blank" href="http://hdwallpapers.in">hdwallpapers</a> </div>
      </div>
    </div>
  </footer>
</div>
</body>
</html>
